#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'

if [ $# -gt 0 ]; then
  ENTERED_NAME="$@"
  FILE_NAME="$(echo "${ENTERED_NAME%.*}" | tr '[:upper:]' '[:lower:]' | tr ' ' '-')"

  if [[ -f "$HOME/notes/cognitops/$FILE_NAME.md" ]]; then
    # If the note exists, lets open it up to edit it
    nvim "$HOME/notes/cognitops/$FILE_NAME.md"
    exit 0
  else
    # If the note does NOT exist, lets initialize it.
    nvim -c "Zet $ENTERED_NAME" -- "$HOME/notes/cognitops/$FILE_NAME.md"
  fi
fi
